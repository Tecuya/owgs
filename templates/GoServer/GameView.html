{% extends "Skin.html" %}

{% block head %}
{% include "GoServer/HeaderJavascript.html" %}
<script type="text/javascript" src="/static/eidogo/js/lang.js"></script>
<script type="text/javascript" src="/static/eidogo/js/eidogo.js"></script>
<script type="text/javascript" src="/static/eidogo/js/util.js"></script>
<script type="text/javascript" src="/static/eidogo/i18n/en.js"></script>
<script type="text/javascript" src="/static/eidogo/js/gametree.js"></script>
<script type="text/javascript" src="/static/eidogo/js/sgf.js"></script>
<script type="text/javascript" src="/static/eidogo/js/board.js"></script>
<script type="text/javascript" src="/static/eidogo/js/rules.js"></script>
<script type="text/javascript" src="/static/eidogo/js/player.js"></script>
<script type="text/javascript" src="/static/eidogo/js/init.js"></script> 
<script>

NetClient_instance.joingame( {{ Game.id }} );

{% if Game.PlayersAssigned %}

// eidogo preliminary sgf data
eidogo_sgf_data = {_children: [{
SZ: 19,
KM: {{ Game.Komi }},
PW: "{{ UserWhite.username }}",
PB: "{{ UserBlack.username }}",
_children: []}]};

// lets eidogo what color we are
eidogo_color = "{{ YouAre }}";

window.addEventListener("load", initEidogo, false);

{% endif %}

</script>

{% endblock %}

{% block content %}

<p><h2>Game #{{ Game.id }}</h2></p>

{% if Game.PlayersAssigned %} 

<div>
 <div id="eidogo"></div>     

 <input size=60 type=text id="ChatInput">
 <button type=button onClick="NetClient_instance.chat( document.getElementById('ChatInput') );">
  Chat
 </button>
</div>

{% else %}
<div>
 <h3>Game Info</h3>
 <p>{{ Game }}</p>
</div>

<div>
 <h3>Join Game</h3>
 <form method="post">
 <input type=hidden name="action" value="params">
 {{ GameForm.as_p }}
 <input type=submit value="Change Game Parameters">
 </form>
</div>

{% endif %}

<div id="Participants">
 <h3>Participants</h3>
 <form method="post">
 <select multiple size=4 id="ParticipantSelect">
   <option value=0>Loading...</option>
 </select>

 {% if not Game.PlayersAssigned %}
 <input type=hidden name="action" value="play">
 <input type=submit value="Play!">
 {% endif %}

 </form>
 </ul>
</div>

 {% if not Game.PlayersAssigned %}
<div id="Chat" style="">
 <h3>Chat</h3>
 <textarea cols=60 rows=7 id="ChatTextarea" readonly></textarea><br>
 <input size=60 type=text id="ChatInput">
 <button type=button onClick="NetClient_instance.chat( document.getElementById('ChatInput') );">
  Send
 </button>
</div>
 {% endif %}

{% endblock %}

