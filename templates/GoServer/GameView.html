{% extends "Skin.html" %}

{% block head %}
{% include "GoServer/HeaderJavascript.html" %}
<script type="text/javascript" src="/static/eidogo/js/lang.js"></script>
<script type="text/javascript" src="/static/eidogo/js/eidogo.js"></script>
<script type="text/javascript" src="/static/eidogo/js/util.js"></script>
<script type="text/javascript" src="/static/eidogo/i18n/en.js"></script>
<script type="text/javascript" src="/static/eidogo/js/gametree.js"></script>
<script type="text/javascript" src="/static/eidogo/js/sgf.js"></script>
<script type="text/javascript" src="/static/eidogo/js/board.js"></script>
<script type="text/javascript" src="/static/eidogo/js/rules.js"></script>
<script type="text/javascript" src="/static/eidogo/js/player.js"></script>
<script type="text/javascript" src="/static/eidogo/js/init.js"></script> 
<script>
NetClient_instance.joingame( {{ Game.id }} );
</script>
{% endblock %}

{% block content %}

<p><h2>Game #{{ Game.id }}</h2></p>

{% if Game.PlayersAssigned %}
 

<div id="eidogo" style="float:left;"></div> 
 
<script type="text/javascript">  
var player = new eidogo.Player({
  container:       "eidogo",
  theme:           "standard",
  // sgfUrl:          "sgf/" + (location.search ? location.search.substring(1) : "example.sgf"),
  sgfPath:      "sgf/",
  mode: "play",
  loadPath:        [0, 0],
  showComments:    true,
  showPlayerInfo:  true,
  showGameInfo:    true,
  showTools:       true,
  showOptions:     true,
  markCurrent:     true,
  markVariations:  true,
  markNext:        false,
  enableShortcuts: false,
  problemMode:     false
});

player.loadSgf();

</script> 
{% endif %}


<div>
 <h3>Game Info</h3>
 <p>{{ Game }}</p>
</div>

 
{% if not Game.PlayersAssigned %}
<div>
 <h3>Join Game</h3>
 <form method="post">
 <input type=hidden name="action" value="params">
 {{ GameForm.as_p }}
 <input type=submit value="Change Game Parameters">
 </form>
</div>

{% endif %}

<div id="Participants">
 <h3>Participants</h3>
 <form method="post">
 <select multiple size=4 id="ParticipantSelect">
   <option value=0>Loading...</option>
 </select>
 <input type=hidden name="action" value="play"
 <input type=submit value="Play!">
 </form>
 </ul>
</div>

<div id="Chat" style="clear:both;">
 <h3>Chat</h3>
 <textarea cols=80 rows=7 id="ChatTextarea" readonly></textarea><br>
 <input size=60 type=text id="ChatLine">
 <button type=button onClick="NetClient_instance.chat( document.getElementById('ChatLine').value );">
  Send
 </button>
</div>

{% endblock %}

